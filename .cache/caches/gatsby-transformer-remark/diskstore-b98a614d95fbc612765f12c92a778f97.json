{"expireTime":9007200889095093000,"key":"transformer-remark-markdown-ast-e2ef8131879194610762a4aeeb211f4b-gatsby-remark-imagesgatsby-remark-table-of-contentsgatsby-remark-prismjsgatsby-remark-autolink-headersgatsby-remark-copy-linked-filesgatsby-remark-smartypantsgatsby-remark-mathjax-ssr-","val":{"type":"root","children":[{"type":"heading","depth":2,"children":[{"type":"link","url":"#-목적","title":null,"children":[],"data":{"hProperties":{"aria-label":" 목적 permalink","class":"anchor before"},"hChildren":[{"type":"raw","value":"<svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg>"}]}},{"type":"text","value":"🧩 목적","position":{"start":{"line":2,"column":4,"offset":4},"end":{"line":2,"column":9,"offset":9},"indent":[]}}],"position":{"start":{"line":2,"column":1,"offset":1},"end":{"line":2,"column":9,"offset":9},"indent":[]},"data":{"id":"-목적","htmlAttributes":{"id":"-목적"},"hProperties":{"id":"-목적","style":"position:relative;"}}},{"type":"paragraph","children":[{"type":"text","value":"express의 특징에 대해서는 ","position":{"start":{"line":4,"column":1,"offset":11},"end":{"line":4,"column":19,"offset":29},"indent":[]}},{"type":"link","title":null,"url":"https://zoomkoding.github.io/node/2020/06/04/node-developer-basic.html","children":[{"type":"text","value":"Node 개발자라면 알아야 할 기본 지식 포스팅","position":{"start":{"line":4,"column":20,"offset":30},"end":{"line":4,"column":46,"offset":56},"indent":[]}}],"position":{"start":{"line":4,"column":19,"offset":29},"end":{"line":4,"column":119,"offset":129},"indent":[]}},{"type":"text","value":"을 통해 정리했으니 이번에는 express generator로 생성되는 여러 미들웨어와 로그인 프로그램 구현에 사용된 미들웨어를 정리해보려고 한다.","position":{"start":{"line":4,"column":119,"offset":129},"end":{"line":4,"column":201,"offset":211},"indent":[]}}],"position":{"start":{"line":4,"column":1,"offset":11},"end":{"line":4,"column":201,"offset":211},"indent":[]}},{"type":"html","value":"<br>","position":{"start":{"line":6,"column":1,"offset":213},"end":{"line":6,"column":5,"offset":217},"indent":[]}},{"type":"heading","depth":2,"children":[{"type":"link","url":"#️-프로젝트-깃헙-레포지토리","title":null,"children":[],"data":{"hProperties":{"aria-label":"️ 프로젝트 깃헙 레포지토리 permalink","class":"anchor before"},"hChildren":[{"type":"raw","value":"<svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg>"}]}},{"type":"text","value":"📽️ 프로젝트 깃헙 레포지토리","position":{"start":{"line":8,"column":4,"offset":222},"end":{"line":8,"column":21,"offset":239},"indent":[]}}],"position":{"start":{"line":8,"column":1,"offset":219},"end":{"line":8,"column":21,"offset":239},"indent":[]},"data":{"id":"️-프로젝트-깃헙-레포지토리","htmlAttributes":{"id":"️-프로젝트-깃헙-레포지토리"},"hProperties":{"id":"️-프로젝트-깃헙-레포지토리","style":"position:relative;"}}},{"type":"paragraph","children":[{"type":"link","title":null,"url":"https://github.com/woowa-techcamp-2020/market-8","children":[{"type":"text","value":"[우아한테크캠프] 배민상회 회원가입/로그인 구현 프로젝트","position":{"start":{"line":10,"column":2,"offset":242},"end":{"line":10,"column":33,"offset":273},"indent":[]}}],"position":{"start":{"line":10,"column":1,"offset":241},"end":{"line":10,"column":83,"offset":323},"indent":[]}}],"position":{"start":{"line":10,"column":1,"offset":241},"end":{"line":10,"column":83,"offset":323},"indent":[]}},{"type":"html","value":"<br>","position":{"start":{"line":12,"column":1,"offset":325},"end":{"line":12,"column":5,"offset":329},"indent":[]}},{"type":"heading","depth":2,"children":[{"type":"link","url":"#-express-주요-미들웨어","title":null,"children":[],"data":{"hProperties":{"aria-label":" express 주요 미들웨어 permalink","class":"anchor before"},"hChildren":[{"type":"raw","value":"<svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg>"}]}},{"type":"text","value":"🏭 Express 주요 미들웨어","position":{"start":{"line":14,"column":4,"offset":334},"end":{"line":14,"column":22,"offset":352},"indent":[]}}],"position":{"start":{"line":14,"column":1,"offset":331},"end":{"line":14,"column":22,"offset":352},"indent":[]},"data":{"id":"-express-주요-미들웨어","htmlAttributes":{"id":"-express-주요-미들웨어"},"hProperties":{"id":"-express-주요-미들웨어","style":"position:relative;"}}},{"type":"heading","depth":3,"children":[{"type":"link","url":"#pug","title":null,"children":[],"data":{"hProperties":{"aria-label":"pug permalink","class":"anchor before"},"hChildren":[{"type":"raw","value":"<svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg>"}]}},{"type":"link","title":null,"url":"https://pugjs.org/api/getting-started.html","children":[{"type":"text","value":"pug","position":{"start":{"line":16,"column":6,"offset":359},"end":{"line":16,"column":9,"offset":362},"indent":[]}}],"position":{"start":{"line":16,"column":5,"offset":358},"end":{"line":16,"column":54,"offset":407},"indent":[]}}],"position":{"start":{"line":16,"column":1,"offset":354},"end":{"line":16,"column":54,"offset":407},"indent":[]},"data":{"id":"pug","htmlAttributes":{"id":"pug"},"hProperties":{"id":"pug","style":"position:relative;"}}},{"type":"paragraph","children":[{"type":"text","value":"Express는 런타임에 템플릿 엔진을 이용해서 여러 변수가 있는 static한 템플릿 파일에 실제 값을 넣어 html 파일을 생성한다.","position":{"start":{"line":18,"column":1,"offset":409},"end":{"line":18,"column":77,"offset":485},"indent":[]}}],"position":{"start":{"line":18,"column":1,"offset":409},"end":{"line":18,"column":77,"offset":485},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Pug는 가장 대표적인 템플릿엔진으로 템플릿이 있는 디렉토리를 views에 정해주고 view engine으로 pug로 설정해주면 사용할 수 있다.","position":{"start":{"line":20,"column":1,"offset":487},"end":{"line":20,"column":82,"offset":568},"indent":[]}}],"position":{"start":{"line":20,"column":1,"offset":487},"end":{"line":20,"column":82,"offset":568},"indent":[]}},{"type":"html","value":"<br>","position":{"start":{"line":22,"column":1,"offset":570},"end":{"line":22,"column":5,"offset":574},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"app.js에 view engine 종류와 template directory를 정해주고","position":{"start":{"line":24,"column":1,"offset":576},"end":{"line":24,"column":49,"offset":624},"indent":[]}}],"position":{"start":{"line":24,"column":1,"offset":576},"end":{"line":24,"column":49,"offset":624},"indent":[]}},{"type":"html","lang":"jsx","meta":null,"value":"<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\">app<span class=\"token punctuation\">.</span><span class=\"token function\">set</span><span class=\"token punctuation\">(</span><span class=\"token string\">'views'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'./views'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\napp<span class=\"token punctuation\">.</span><span class=\"token function\">set</span><span class=\"token punctuation\">(</span><span class=\"token string\">'view engine'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'pug'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>","position":{"start":{"line":26,"column":1,"offset":626},"end":{"line":29,"column":4,"offset":696},"indent":[1,1,1]}},{"type":"paragraph","children":[{"type":"text","value":"다음과 같이 ","position":{"start":{"line":31,"column":1,"offset":698},"end":{"line":31,"column":8,"offset":705},"indent":[]}},{"type":"strong","children":[{"type":"text","value":"index.pug","position":{"start":{"line":31,"column":10,"offset":707},"end":{"line":31,"column":19,"offset":716},"indent":[]}}],"position":{"start":{"line":31,"column":8,"offset":705},"end":{"line":31,"column":21,"offset":718},"indent":[]}},{"type":"text","value":" 를 만들어 주고 title에 대한 변수값을 전달받는 template을 설정하고","position":{"start":{"line":31,"column":21,"offset":718},"end":{"line":31,"column":65,"offset":762},"indent":[]}}],"position":{"start":{"line":31,"column":1,"offset":698},"end":{"line":31,"column":65,"offset":762},"indent":[]}},{"type":"html","lang":"jsx","meta":null,"value":"<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">extends</span> <span class=\"token class-name\">layout</span>\n\nblock content\n  h1<span class=\"token operator\">=</span> title\n  p Welcome to #<span class=\"token punctuation\">{</span>title<span class=\"token punctuation\">}</span></code></pre></div>","position":{"start":{"line":33,"column":1,"offset":764},"end":{"line":39,"column":4,"offset":840},"indent":[1,1,1,1,1,1]}},{"type":"paragraph","children":[{"type":"strong","children":[{"type":"text","value":"router.js","position":{"start":{"line":41,"column":3,"offset":844},"end":{"line":41,"column":12,"offset":853},"indent":[]}}],"position":{"start":{"line":41,"column":1,"offset":842},"end":{"line":41,"column":14,"offset":855},"indent":[]}},{"type":"text","value":" 에서 res.render 함수를 통해 사용할 template과 변수 값을 전달해주면","position":{"start":{"line":41,"column":14,"offset":855},"end":{"line":41,"column":61,"offset":902},"indent":[]}}],"position":{"start":{"line":41,"column":1,"offset":842},"end":{"line":41,"column":61,"offset":902},"indent":[]}},{"type":"html","lang":"jsx","meta":null,"value":"<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\">router<span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token string\">'/'</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">req<span class=\"token punctuation\">,</span> res<span class=\"token punctuation\">,</span> next</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  res<span class=\"token punctuation\">.</span><span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token string\">'index'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> title<span class=\"token operator\">:</span> <span class=\"token string\">'Express'</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>","position":{"start":{"line":43,"column":1,"offset":904},"end":{"line":47,"column":4,"offset":1007},"indent":[1,1,1,1]}},{"type":"paragraph","children":[{"type":"text","value":"template에 변수 값을 넣어서 해당하는 페이지를 유저에게 전달된다.","position":{"start":{"line":49,"column":1,"offset":1009},"end":{"line":49,"column":41,"offset":1049},"indent":[]}}],"position":{"start":{"line":49,"column":1,"offset":1009},"end":{"line":49,"column":41,"offset":1049},"indent":[]}},{"type":"html","value":"<br>","position":{"start":{"line":51,"column":1,"offset":1051},"end":{"line":51,"column":5,"offset":1055},"indent":[]}},{"type":"heading","depth":3,"children":[{"type":"link","url":"#morgan","title":null,"children":[],"data":{"hProperties":{"aria-label":"morgan permalink","class":"anchor before"},"hChildren":[{"type":"raw","value":"<svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg>"}]}},{"type":"link","title":null,"url":"https://www.npmjs.com/package/morgan","children":[{"type":"text","value":"morgan","position":{"start":{"line":53,"column":6,"offset":1062},"end":{"line":53,"column":12,"offset":1068},"indent":[]}}],"position":{"start":{"line":53,"column":5,"offset":1061},"end":{"line":53,"column":51,"offset":1107},"indent":[]}}],"position":{"start":{"line":53,"column":1,"offset":1057},"end":{"line":53,"column":51,"offset":1107},"indent":[]},"data":{"id":"morgan","htmlAttributes":{"id":"morgan"},"hProperties":{"id":"morgan","style":"position:relative;"}}},{"type":"paragraph","children":[{"type":"text","value":"morgan은 이름에서 바로 알 수 없지만 request를 logging을 해주는 아주 유용한 미들웨어이다.","position":{"start":{"line":55,"column":1,"offset":1109},"end":{"line":55,"column":61,"offset":1169},"indent":[]}}],"position":{"start":{"line":55,"column":1,"offset":1109},"end":{"line":55,"column":61,"offset":1169},"indent":[]}},{"type":"html","lang":"jsx","meta":null,"value":"<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">var</span> logger <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'morgan'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// ···</span>\n\napp<span class=\"token punctuation\">.</span><span class=\"token function\">use</span><span class=\"token punctuation\">(</span><span class=\"token function\">logger</span><span class=\"token punctuation\">(</span><span class=\"token string\">'dev'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>","position":{"start":{"line":57,"column":1,"offset":1171},"end":{"line":63,"column":4,"offset":1245},"indent":[1,1,1,1,1,1]}},{"type":"html","value":"<br>","position":{"start":{"line":65,"column":1,"offset":1247},"end":{"line":65,"column":5,"offset":1251},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"morgan을 사용할 때 parameter로 format 값을 보내줄 수 있다.(이 미리 정해진 format은 tiny, common, short 등 다양하다.)","position":{"start":{"line":67,"column":1,"offset":1253},"end":{"line":67,"column":91,"offset":1343},"indent":[]}}],"position":{"start":{"line":67,"column":1,"offset":1253},"end":{"line":67,"column":91,"offset":1343},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"dev format는 request를 다음과 같은 형식으로 console에 기록해준다.","position":{"start":{"line":69,"column":1,"offset":1345},"end":{"line":69,"column":49,"offset":1393},"indent":[]}}],"position":{"start":{"line":69,"column":1,"offset":1345},"end":{"line":69,"column":49,"offset":1393},"indent":[]}},{"type":"html","lang":null,"meta":null,"value":"<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">:method :url :status :response-time ms - :res[content-length]</code></pre></div>","position":{"start":{"line":71,"column":1,"offset":1395},"end":{"line":73,"column":4,"offset":1464},"indent":[1,1]}},{"type":"html","value":"<br>","position":{"start":{"line":75,"column":1,"offset":1466},"end":{"line":75,"column":5,"offset":1470},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"dev format을 사용했을 때의 모습이다.","position":{"start":{"line":77,"column":1,"offset":1472},"end":{"line":77,"column":26,"offset":1497},"indent":[]}}],"position":{"start":{"line":77,"column":1,"offset":1472},"end":{"line":77,"column":26,"offset":1497},"indent":[]}},{"type":"paragraph","children":[{"type":"html","title":null,"url":"./express-middleware-1.png","alt":"express-middleware-0","position":{"start":{"line":79,"column":1,"offset":1499},"end":{"line":79,"column":52,"offset":1550},"indent":[]},"value":"<span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 12.222222222222221%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAACCAYAAABYBvyLAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAf0lEQVQI1x1NbQ7CIBTbKUw0gQ3IQuJUlE8Hg4H3v1Ml/GjatH2vU60Vcd8h5Ipr03h9LXI6kHNGKQXWWgghhr4/NtwWioWx4bHOhBBQSsE5xzzPmHIvaq3x6cjtHIettYGUEmKM8N6PkVVtuJwKz7fCr+fOORhjxvMQAqSU+AOkQz7dC3USLgAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"express-middleware-0\"\n        title=\"express-middleware-0\"\n        src=\"/static/bbf160fe311b8608f93f207510c846cf/37523/express-middleware-1.png\"\n        srcset=\"/static/bbf160fe311b8608f93f207510c846cf/e9ff0/express-middleware-1.png 180w,\n/static/bbf160fe311b8608f93f207510c846cf/f21e7/express-middleware-1.png 360w,\n/static/bbf160fe311b8608f93f207510c846cf/37523/express-middleware-1.png 720w,\n/static/bbf160fe311b8608f93f207510c846cf/eb2af/express-middleware-1.png 954w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n    </span>"}],"position":{"start":{"line":79,"column":1,"offset":1499},"end":{"line":79,"column":52,"offset":1550},"indent":[]}},{"type":"html","value":"<br>","position":{"start":{"line":81,"column":1,"offset":1552},"end":{"line":81,"column":5,"offset":1556},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"morgan을 사용하면 에러가 어떤 요청에서 발생했는지 확인할 수 있어서 매우 유용하다. 근데 만일 실제 서비스를 배포한 상태에서 서버의 상태를 콘솔로만 확인한다면 로그를 모두 확인하는데 어려움이 있다.","position":{"start":{"line":83,"column":1,"offset":1558},"end":{"line":83,"column":114,"offset":1671},"indent":[]}}],"position":{"start":{"line":83,"column":1,"offset":1558},"end":{"line":83,"column":114,"offset":1671},"indent":[]}},{"type":"html","value":"<br>","position":{"start":{"line":85,"column":1,"offset":1673},"end":{"line":85,"column":5,"offset":1677},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"🍯","position":{"start":{"line":87,"column":1,"offset":1679},"end":{"line":87,"column":3,"offset":1681},"indent":[]}},{"type":"strong","children":[{"type":"text","value":"꿀팁","position":{"start":{"line":87,"column":5,"offset":1683},"end":{"line":87,"column":7,"offset":1685},"indent":[]}}],"position":{"start":{"line":87,"column":3,"offset":1681},"end":{"line":87,"column":9,"offset":1687},"indent":[]}},{"type":"text","value":" 🍯","position":{"start":{"line":87,"column":9,"offset":1687},"end":{"line":87,"column":12,"offset":1690},"indent":[]}}],"position":{"start":{"line":87,"column":1,"offset":1679},"end":{"line":87,"column":12,"offset":1690},"indent":[]}},{"type":"paragraph","children":[{"type":"strong","children":[{"type":"text","value":"morgan은 console 대신 file에 logging 하도록 설정이 가능하다.","position":{"start":{"line":89,"column":3,"offset":1694},"end":{"line":89,"column":49,"offset":1740},"indent":[]}}],"position":{"start":{"line":89,"column":1,"offset":1692},"end":{"line":89,"column":51,"offset":1742},"indent":[]}}],"position":{"start":{"line":89,"column":1,"offset":1692},"end":{"line":89,"column":51,"offset":1742},"indent":[]}},{"type":"paragraph","children":[{"type":"strong","children":[{"type":"text","value":"rotating-file-stream이라는 미들웨어를 사용하면 매일 다른 파일에 로깅을 할 수 있도록 설정할 수 있고 심지어는 console에는 에러 요청만 기록하도록 하고 파일에는 모든 요청을 다 기록하도록 설정할 수도 있다.","position":{"start":{"line":91,"column":3,"offset":1746},"end":{"line":91,"column":130,"offset":1873},"indent":[]}}],"position":{"start":{"line":91,"column":1,"offset":1744},"end":{"line":91,"column":132,"offset":1875},"indent":[]}}],"position":{"start":{"line":91,"column":1,"offset":1744},"end":{"line":91,"column":132,"offset":1875},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"다음은 그 예시이다!","position":{"start":{"line":93,"column":1,"offset":1877},"end":{"line":93,"column":12,"offset":1888},"indent":[]}}],"position":{"start":{"line":93,"column":1,"offset":1877},"end":{"line":93,"column":12,"offset":1888},"indent":[]}},{"type":"html","lang":"jsx","meta":null,"value":"<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">var</span> express <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'express'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">var</span> morgan <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'morgan'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">var</span> path <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'path'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">var</span> rfs <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'rotating-file-stream'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// version 2.x</span>\n\n<span class=\"token keyword\">var</span> app <span class=\"token operator\">=</span> <span class=\"token function\">express</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// create a rotating write stream</span>\n<span class=\"token keyword\">var</span> accessLogStream <span class=\"token operator\">=</span> rfs<span class=\"token punctuation\">.</span><span class=\"token function\">createStream</span><span class=\"token punctuation\">(</span><span class=\"token string\">'access.log'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>\n  interval<span class=\"token operator\">:</span> <span class=\"token string\">'1d'</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">// rotate daily</span>\n  path<span class=\"token operator\">:</span> path<span class=\"token punctuation\">.</span><span class=\"token function\">join</span><span class=\"token punctuation\">(</span>__dirname<span class=\"token punctuation\">,</span> <span class=\"token string\">'log'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// log only 4xx and 5xx responses to console</span>\napp<span class=\"token punctuation\">.</span><span class=\"token function\">use</span><span class=\"token punctuation\">(</span>\n  <span class=\"token function\">morgan</span><span class=\"token punctuation\">(</span><span class=\"token string\">'dev'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function-variable function\">skip</span><span class=\"token operator\">:</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">req<span class=\"token punctuation\">,</span> res</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">return</span> res<span class=\"token punctuation\">.</span>statusCode <span class=\"token operator\">&lt;</span> <span class=\"token number\">400</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// log all requests to access.log</span>\napp<span class=\"token punctuation\">.</span><span class=\"token function\">use</span><span class=\"token punctuation\">(</span>\n  <span class=\"token function\">morgan</span><span class=\"token punctuation\">(</span><span class=\"token string\">'common'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>\n    stream<span class=\"token operator\">:</span> fs<span class=\"token punctuation\">.</span><span class=\"token function\">createWriteStream</span><span class=\"token punctuation\">(</span>path<span class=\"token punctuation\">.</span><span class=\"token function\">join</span><span class=\"token punctuation\">(</span>__dirname<span class=\"token punctuation\">,</span> <span class=\"token string\">'access.log'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> flags<span class=\"token operator\">:</span> <span class=\"token string\">'a'</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// ···</span></code></pre></div>","position":{"start":{"line":95,"column":1,"offset":1890},"end":{"line":125,"column":4,"offset":2562},"indent":[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]}},{"type":"html","value":"<br>","position":{"start":{"line":127,"column":1,"offset":2564},"end":{"line":127,"column":5,"offset":2568},"indent":[]}},{"type":"heading","depth":3,"children":[{"type":"link","url":"#express-session","title":null,"children":[],"data":{"hProperties":{"aria-label":"express session permalink","class":"anchor before"},"hChildren":[{"type":"raw","value":"<svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg>"}]}},{"type":"link","title":null,"url":"https://www.npmjs.com/package/express-session","children":[{"type":"text","value":"express-session","position":{"start":{"line":129,"column":6,"offset":2575},"end":{"line":129,"column":21,"offset":2590},"indent":[]}}],"position":{"start":{"line":129,"column":5,"offset":2574},"end":{"line":129,"column":69,"offset":2638},"indent":[]}}],"position":{"start":{"line":129,"column":1,"offset":2570},"end":{"line":129,"column":69,"offset":2638},"indent":[]},"data":{"id":"express-session","htmlAttributes":{"id":"express-session"},"hProperties":{"id":"express-session","style":"position:relative;"}}},{"type":"paragraph","children":[{"type":"text","value":"express-session은 서버가 세션을 이용하게 해주고 유저 쿠키에 세션 정보를 담을 수 있게 해주는 매우 유용한 미들 웨어이다.","position":{"start":{"line":131,"column":1,"offset":2640},"end":{"line":131,"column":76,"offset":2715},"indent":[]}}],"position":{"start":{"line":131,"column":1,"offset":2640},"end":{"line":131,"column":76,"offset":2715},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"유저 쿠키에 세션 정보를 담을 때는 세션의 모든 정보를 담는 것이 아니라 ","position":{"start":{"line":133,"column":1,"offset":2717},"end":{"line":133,"column":42,"offset":2758},"indent":[]}},{"type":"strong","children":[{"type":"text","value":"세션의 아이디 값을 저장","position":{"start":{"line":133,"column":44,"offset":2760},"end":{"line":133,"column":57,"offset":2773},"indent":[]}}],"position":{"start":{"line":133,"column":42,"offset":2758},"end":{"line":133,"column":59,"offset":2775},"indent":[]}},{"type":"text","value":"하고 서버에서 데이터를 관리하게 된다.","position":{"start":{"line":133,"column":59,"offset":2775},"end":{"line":133,"column":80,"offset":2796},"indent":[]}}],"position":{"start":{"line":133,"column":1,"offset":2717},"end":{"line":133,"column":80,"offset":2796},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"이때 여러 옵션을 정해줘야 하는데 주요 옵션의 특징은 다음과 같다.","position":{"start":{"line":135,"column":1,"offset":2798},"end":{"line":135,"column":38,"offset":2835},"indent":[]}}],"position":{"start":{"line":135,"column":1,"offset":2798},"end":{"line":135,"column":38,"offset":2835},"indent":[]}},{"type":"paragraph","children":[{"type":"strong","children":[{"type":"text","value":"secret","position":{"start":{"line":137,"column":3,"offset":2839},"end":{"line":137,"column":9,"offset":2845},"indent":[]}}],"position":{"start":{"line":137,"column":1,"offset":2837},"end":{"line":137,"column":11,"offset":2847},"indent":[]}},{"type":"text","value":" : session Id를 hash하기 위해 사용되는 key 값이다.(해쉬한 값이 connect.sid에 저장된다.)","position":{"start":{"line":137,"column":11,"offset":2847},"end":{"line":137,"column":76,"offset":2912},"indent":[]}}],"position":{"start":{"line":137,"column":1,"offset":2837},"end":{"line":137,"column":76,"offset":2912},"indent":[]}},{"type":"paragraph","children":[{"type":"strong","children":[{"type":"text","value":"resave","position":{"start":{"line":139,"column":3,"offset":2916},"end":{"line":139,"column":9,"offset":2922},"indent":[]}}],"position":{"start":{"line":139,"column":1,"offset":2914},"end":{"line":139,"column":11,"offset":2924},"indent":[]}},{"type":"text","value":" : 세션을 접속할 때마다 새로운 세션을 발급할지 말지 정하는 곳이다.(true 설정시 race condition을 발생 시킬 수 있다고 한다. 대부분의 경우 false가 적절하다고 한다.)","position":{"start":{"line":139,"column":11,"offset":2924},"end":{"line":139,"column":117,"offset":3030},"indent":[]}}],"position":{"start":{"line":139,"column":1,"offset":2914},"end":{"line":139,"column":117,"offset":3030},"indent":[]}},{"type":"paragraph","children":[{"type":"strong","children":[{"type":"text","value":"saveUninitialized","position":{"start":{"line":141,"column":3,"offset":3034},"end":{"line":141,"column":20,"offset":3051},"indent":[]}}],"position":{"start":{"line":141,"column":1,"offset":3032},"end":{"line":141,"column":22,"offset":3053},"indent":[]}},{"type":"text","value":" : 세션 ID를 발급하지 않는 세션도 다 기록할지 정한다.(로그인에 사용할 때는 서버 메모리 사용을 줄여주기 위해 false로 설정한다.)","position":{"start":{"line":141,"column":22,"offset":3053},"end":{"line":141,"column":100,"offset":3131},"indent":[]}}],"position":{"start":{"line":141,"column":1,"offset":3032},"end":{"line":141,"column":100,"offset":3131},"indent":[]}},{"type":"paragraph","children":[{"type":"strong","children":[{"type":"text","value":"storage","position":{"start":{"line":143,"column":3,"offset":3135},"end":{"line":143,"column":10,"offset":3142},"indent":[]}}],"position":{"start":{"line":143,"column":1,"offset":3133},"end":{"line":143,"column":12,"offset":3144},"indent":[]}},{"type":"text","value":" : 세션을 어디에 저장할지 정한다.(기본 값은 MemoryStore를 사용하기 때문에 production에 사용하면 memory leak이 발생할 수도 있다. ","position":{"start":{"line":143,"column":12,"offset":3144},"end":{"line":143,"column":102,"offset":3234},"indent":[]}},{"type":"link","title":null,"url":"https://www.npmjs.com/package/express-session#compatible-session-stores","children":[{"type":"text","value":"세션을 저장할 수 있는 다양한 storage","position":{"start":{"line":143,"column":103,"offset":3235},"end":{"line":143,"column":127,"offset":3259},"indent":[]}}],"position":{"start":{"line":143,"column":102,"offset":3234},"end":{"line":143,"column":201,"offset":3333},"indent":[]}},{"type":"text","value":"가 존재한다.)","position":{"start":{"line":143,"column":201,"offset":3333},"end":{"line":143,"column":209,"offset":3341},"indent":[]}}],"position":{"start":{"line":143,"column":1,"offset":3133},"end":{"line":143,"column":209,"offset":3341},"indent":[]}},{"type":"paragraph","children":[{"type":"html","title":null,"url":"./express-middleware-2.png","alt":"express-middleware-2","position":{"start":{"line":145,"column":1,"offset":3343},"end":{"line":145,"column":52,"offset":3394},"indent":[]},"value":"<span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 107.77777777777777%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAWCAYAAADAQbwGAAAACXBIWXMAAAsTAAALEwEAmpwYAAACx0lEQVQ4y51US27UQBCdwyHBHUAcgC13iEAJk2TEggXiAlFWrAEpZFgCWZEZoqAknsRjj8f/bv/aj6qyHTxkEkFaeu5yf1511avuwaMHD7GzO8Jwewfb27sYDnewtTX8L2xuvsJo9BqPnzzF4O3GBrjNLi+xWCyQJAnu2/b29jG4sCzkeY40TaFUCq0zLKMMRVGiqkqUJfWMqhLwvzFGHGdZtjLmui4GqcrgxTUiDYGfAqe2oTGy6bBB2qAojWyqKoO6pvVRDE2EbFemmWMHA6UUwjDEbDbD1dUVbNuGv1zAcRz4vo/5fC6eV1u91maugdZEGCWw5x5sp8FiGcL1AgRhAsddil2UNfLCNFhj83xDSJ8gzmDNbPw8+QU/iGHIG0UGihKmbpCX5lZwOtLMIE6IkMXIS4gw0+lUQr1Pq8ipEGqtKcQYy6WPiwsLX799J3uJORE7jkul5N0Nz4NH5cZpEUJW5tyaYzKZ4OjoCB8+fsLh4RgHB58xHn+RcT4595PJVDDtg+eOj3FyetYQcu2pvFEqihP8OJ7SSWewrEucnVtUn/pGePVf4MZpa0NWRKSRqAKpLuH5MbwgafoWIc37YYogUuS8ks1ZUQtE5RZt2WipwziOb004VwLnldfxpqLIUZCIuSBrb0z5h5ALmDdIOFT5fXBLkhQezUfk1HUXIiCvd6jgXRKEhUnk6raEQRCIon3CzubGpcW3RSl9Z+kw1/UJuV9JfI+UHwC+q/25dZGshMz54Vzwa9Nt7hYXRSH5yrJc7NtSI4T84eeHw+JcSdLlOaqFmMFPGTtWBHbajXevj8C0KjNR5+FGvfW8rx+vb+aQCXmCVerC8eMKOjcrG1bE6pG83Pfw7I2NF/usdO+EzM6h0Q9iVcmTVNdmrQDX5ITRew/P39nSCyHnhMuGReHe9wNEIf2THfwDqiyCyUPp+XC/AUnzi51nGWFCAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"express-middleware-2\"\n        title=\"express-middleware-2\"\n        src=\"/static/dfe0bd88f9c8510ab1a85034c3ac03d9/37523/express-middleware-2.png\"\n        srcset=\"/static/dfe0bd88f9c8510ab1a85034c3ac03d9/e9ff0/express-middleware-2.png 180w,\n/static/dfe0bd88f9c8510ab1a85034c3ac03d9/f21e7/express-middleware-2.png 360w,\n/static/dfe0bd88f9c8510ab1a85034c3ac03d9/37523/express-middleware-2.png 720w,\n/static/dfe0bd88f9c8510ab1a85034c3ac03d9/09e48/express-middleware-2.png 974w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n    </span>"}],"position":{"start":{"line":145,"column":1,"offset":3343},"end":{"line":145,"column":52,"offset":3394},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"그럼 간단히 어떻게 돌아가는지 확인해보자.","position":{"start":{"line":147,"column":1,"offset":3396},"end":{"line":147,"column":24,"offset":3419},"indent":[]}}],"position":{"start":{"line":147,"column":1,"offset":3396},"end":{"line":147,"column":24,"offset":3419},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"다음 코드는 session 미들웨어를 지나가면서 어떤 req에 어떤 내용이 생기는지 보는 코드이다.","position":{"start":{"line":149,"column":1,"offset":3421},"end":{"line":149,"column":56,"offset":3476},"indent":[]}}],"position":{"start":{"line":149,"column":1,"offset":3421},"end":{"line":149,"column":56,"offset":3476},"indent":[]}},{"type":"html","lang":"jsx","meta":null,"value":"<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">var</span> express <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'express'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">var</span> session <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'express-session'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">var</span> app <span class=\"token operator\">=</span> <span class=\"token function\">express</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token function\">logSessionInfo</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">req</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">req.session : </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>req<span class=\"token punctuation\">.</span>session<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">req.sessionID : </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>req<span class=\"token punctuation\">.</span>sessionID<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\napp<span class=\"token punctuation\">.</span><span class=\"token function\">use</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">req<span class=\"token punctuation\">,</span> res<span class=\"token punctuation\">,</span> next</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">express-session 통과 전</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">req.headers.cookie : </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>req<span class=\"token punctuation\">.</span>session<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token function\">logSessionInfo</span><span class=\"token punctuation\">(</span>req<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token function\">next</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\napp<span class=\"token punctuation\">.</span><span class=\"token function\">use</span><span class=\"token punctuation\">(</span>\n  <span class=\"token function\">session</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n    secret<span class=\"token operator\">:</span> <span class=\"token string\">'keyboard cat'</span><span class=\"token punctuation\">,</span>\n    resave<span class=\"token operator\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span>\n    saveUninitialized<span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\napp<span class=\"token punctuation\">.</span><span class=\"token function\">use</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">req<span class=\"token punctuation\">,</span> res<span class=\"token punctuation\">,</span> next</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">express-session 통과 후</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token function\">logSessionInfo</span><span class=\"token punctuation\">(</span>req<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token function\">next</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// ···</span></code></pre></div>","position":{"start":{"line":151,"column":1,"offset":3478},"end":{"line":184,"column":4,"offset":4113},"indent":[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]}},{"type":"html","value":"<br>","position":{"start":{"line":186,"column":1,"offset":4115},"end":{"line":186,"column":5,"offset":4119},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"출력 결과는 다음과 같다.","position":{"start":{"line":188,"column":1,"offset":4121},"end":{"line":188,"column":15,"offset":4135},"indent":[]}}],"position":{"start":{"line":188,"column":1,"offset":4121},"end":{"line":188,"column":15,"offset":4135},"indent":[]}},{"type":"paragraph","children":[{"type":"html","title":null,"url":"./express-middleware-3.png","alt":"express-middleware-3","position":{"start":{"line":190,"column":1,"offset":4137},"end":{"line":190,"column":52,"offset":4188},"indent":[]},"value":"<span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 12.777777777777777%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAADCAYAAACTWi8uAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAd0lEQVQI15WOOw7EIAxEOQiCCGgIn9ABgoiC+59pVrbENltt8eQZa/wRtVa01pBSgvceIQTknNlTjTEy5Kne9839Uso3Q/pkRO8day3MOeGcg1IKWmtc18UYY36w1jJH09zRYoyB932x9+aldIUuPs/D30gp/+IDl1xYV6edBaQAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"express-middleware-3\"\n        title=\"express-middleware-3\"\n        src=\"/static/4c35b02d280ed3feab8a29fd137127b7/37523/express-middleware-3.png\"\n        srcset=\"/static/4c35b02d280ed3feab8a29fd137127b7/e9ff0/express-middleware-3.png 180w,\n/static/4c35b02d280ed3feab8a29fd137127b7/f21e7/express-middleware-3.png 360w,\n/static/4c35b02d280ed3feab8a29fd137127b7/37523/express-middleware-3.png 720w,\n/static/4c35b02d280ed3feab8a29fd137127b7/302a4/express-middleware-3.png 1080w,\n/static/4c35b02d280ed3feab8a29fd137127b7/07a9c/express-middleware-3.png 1440w,\n/static/4c35b02d280ed3feab8a29fd137127b7/4a70a/express-middleware-3.png 2390w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n    </span>"}],"position":{"start":{"line":190,"column":1,"offset":4137},"end":{"line":190,"column":52,"offset":4188},"indent":[]}},{"type":"html","value":"<br>","position":{"start":{"line":192,"column":1,"offset":4190},"end":{"line":192,"column":5,"offset":4194},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"🗒️","position":{"start":{"line":194,"column":1,"offset":4196},"end":{"line":194,"column":4,"offset":4199},"indent":[]}},{"type":"strong","children":[{"type":"text","value":"정리","position":{"start":{"line":194,"column":6,"offset":4201},"end":{"line":194,"column":8,"offset":4203},"indent":[]}}],"position":{"start":{"line":194,"column":4,"offset":4199},"end":{"line":194,"column":10,"offset":4205},"indent":[]}},{"type":"text","value":" 🗒️","position":{"start":{"line":194,"column":10,"offset":4205},"end":{"line":194,"column":14,"offset":4209},"indent":[]}}],"position":{"start":{"line":194,"column":1,"offset":4196},"end":{"line":194,"column":14,"offset":4209},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"express-sesssion은 req.headers.cookie에 주어진 sid를 sessionID로 번역하고 그 sessionID에 해당하는 session 값을 req.session에 저장하게 된다!","position":{"start":{"line":196,"column":1,"offset":4211},"end":{"line":196,"column":114,"offset":4324},"indent":[]}}],"position":{"start":{"line":196,"column":1,"offset":4211},"end":{"line":196,"column":114,"offset":4324},"indent":[]}},{"type":"paragraph","children":[{"type":"strong","children":[{"type":"text","value":"즉, 세션의 정보 값은 쿠키에 전달되지 않고 해쉬화된 sid만 유저의 쿠키에 저장되고 요청이 들어오면 sid를 번역하고 얻은 session ID에 해당하는 session 값을 req.session에 넣어주어 next함수에서 사용할 수 있게 해준다!!(이제 좀 알겠다…ㅋㅋㅋ)","position":{"start":{"line":198,"column":3,"offset":4328},"end":{"line":198,"column":158,"offset":4483},"indent":[]}}],"position":{"start":{"line":198,"column":1,"offset":4326},"end":{"line":198,"column":160,"offset":4485},"indent":[]}}],"position":{"start":{"line":198,"column":1,"offset":4326},"end":{"line":198,"column":160,"offset":4485},"indent":[]}},{"type":"html","value":"<br>","position":{"start":{"line":200,"column":1,"offset":4487},"end":{"line":200,"column":5,"offset":4491},"indent":[]}},{"type":"heading","depth":2,"children":[{"type":"link","url":"#-본격-express로-로그인-구현하기","title":null,"children":[],"data":{"hProperties":{"aria-label":" 본격 express로 로그인 구현하기 permalink","class":"anchor before"},"hChildren":[{"type":"raw","value":"<svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg>"}]}},{"type":"text","value":"🤝 본격 express로 로그인 구현하기","position":{"start":{"line":202,"column":4,"offset":4496},"end":{"line":202,"column":27,"offset":4519},"indent":[]}}],"position":{"start":{"line":202,"column":1,"offset":4493},"end":{"line":202,"column":27,"offset":4519},"indent":[]},"data":{"id":"-본격-express로-로그인-구현하기","htmlAttributes":{"id":"-본격-express로-로그인-구현하기"},"hProperties":{"id":"-본격-express로-로그인-구현하기","style":"position:relative;"}}},{"type":"paragraph","children":[{"type":"text","value":"그럼 이제 로그인 구현의 express의 middleware을 알아보고 로그인 페이지를 구현해보자.","position":{"start":{"line":204,"column":1,"offset":4521},"end":{"line":204,"column":56,"offset":4576},"indent":[]}}],"position":{"start":{"line":204,"column":1,"offset":4521},"end":{"line":204,"column":56,"offset":4576},"indent":[]}},{"type":"heading","depth":3,"children":[{"type":"link","url":"#passport","title":null,"children":[],"data":{"hProperties":{"aria-label":"passport permalink","class":"anchor before"},"hChildren":[{"type":"raw","value":"<svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg>"}]}},{"type":"link","title":null,"url":"http://www.passportjs.org/docs/","children":[{"type":"text","value":"passport","position":{"start":{"line":206,"column":6,"offset":4583},"end":{"line":206,"column":14,"offset":4591},"indent":[]}}],"position":{"start":{"line":206,"column":5,"offset":4582},"end":{"line":206,"column":48,"offset":4625},"indent":[]}}],"position":{"start":{"line":206,"column":1,"offset":4578},"end":{"line":206,"column":48,"offset":4625},"indent":[]},"data":{"id":"passport","htmlAttributes":{"id":"passport"},"hProperties":{"id":"passport","style":"position:relative;"}}},{"type":"paragraph","children":[{"type":"text","value":"passport는 node에서 가장 많이 쓰이는 authentication 미들웨어이다. 간단하게 username과 password를 제공하는 로그인 방법부터 OpenID와 OAuth 전략도 제공하기 때문에 매우 유용하게 사용할 수 있다.","position":{"start":{"line":208,"column":1,"offset":4627},"end":{"line":208,"column":134,"offset":4760},"indent":[]}}],"position":{"start":{"line":208,"column":1,"offset":4627},"end":{"line":208,"column":134,"offset":4760},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"passport에서 제공하는 여러 strategy를 설치해서 사용할 수 있다.","position":{"start":{"line":210,"column":1,"offset":4762},"end":{"line":210,"column":44,"offset":4805},"indent":[]}}],"position":{"start":{"line":210,"column":1,"offset":4762},"end":{"line":210,"column":44,"offset":4805},"indent":[]}},{"type":"paragraph","children":[{"type":"html","title":null,"url":"./express-middleware-4.png","alt":"express-middleware-4","position":{"start":{"line":212,"column":1,"offset":4807},"end":{"line":212,"column":52,"offset":4858},"indent":[]},"value":"<span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 70.55555555555556%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAYAAAAvxDzwAAAACXBIWXMAAAsTAAALEwEAmpwYAAAByklEQVQ4y31Ti3LCMAzr///kYLSF0kfSJn23eJIPQ4/bljsTiGNFkk2ybZvEECTGKOu6yuPxkH3fdR/HUQJywzDomQVzrOv7XmvHQz4hSHa9ytfpJAMucDHB1XWdpGkqTdO8zg2QdcX9Lt+XixRlKY9nPuHHFjqRbdUiXmZwkRnBnHMyTdMrb/sGVVvrZfVeFnznWbIsi3R4KTS1SrQgAIGuYE9Qgh/z/B3qWmu78i49QDcyZGEN2i7PJOAVehaent5x+QQrCEy/LMfoEL64icsyjRay6WuyQ+rsncyukQWeHWWxkOyqqhIqOeZo1QKrZuc0Vjy4q+R5Bu1Co4cfIxibZIJRconX/5IcaBcigpRKnulVnotLL9KCSXxKo0QCXWAHQc2G4+6LQq1itJVJBuoEJjNM/eyy+ThDhS3L/yu5hbkBnTIpDJOcgz13Gx+T/u5yoZ2O7iC5wfD6a66MLEwyB/t2u2m3Cf4p2eOMQbtektll6/BxsZAd/m1R3gJQ2jVhhjnY7y6DCSWTNrsVMUIDLnxKtijZPLJkHcD6tpUehJShepWlGM5UpbNj9fmkXSvLSs7ns3Y5w/Dad+70kwPtARr7QS3g//sH6Mw2QemTwHMAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"express-middleware-4\"\n        title=\"express-middleware-4\"\n        src=\"/static/2aabc701ddb405e62207d997f836ace8/37523/express-middleware-4.png\"\n        srcset=\"/static/2aabc701ddb405e62207d997f836ace8/e9ff0/express-middleware-4.png 180w,\n/static/2aabc701ddb405e62207d997f836ace8/f21e7/express-middleware-4.png 360w,\n/static/2aabc701ddb405e62207d997f836ace8/37523/express-middleware-4.png 720w,\n/static/2aabc701ddb405e62207d997f836ace8/302a4/express-middleware-4.png 1080w,\n/static/2aabc701ddb405e62207d997f836ace8/6be49/express-middleware-4.png 1160w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n    </span>"}],"position":{"start":{"line":212,"column":1,"offset":4807},"end":{"line":212,"column":52,"offset":4858},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"다음과 같이 passport와 하나의 Strategy를 가져와서","position":{"start":{"line":214,"column":1,"offset":4860},"end":{"line":214,"column":36,"offset":4895},"indent":[]}}],"position":{"start":{"line":214,"column":1,"offset":4860},"end":{"line":214,"column":36,"offset":4895},"indent":[]}},{"type":"html","lang":"jsx","meta":null,"value":"<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">const</span> passport <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'passport'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> localStrategy <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'passport-local'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>Strategy<span class=\"token punctuation\">;</span></code></pre></div>","position":{"start":{"line":216,"column":1,"offset":4897},"end":{"line":219,"column":4,"offset":5003},"indent":[1,1,1]}},{"type":"paragraph","children":[{"type":"text","value":"어떤 식으로 strategy의 구체적인 내용을 정의하고 passport에 넣어준다.","position":{"start":{"line":221,"column":1,"offset":5005},"end":{"line":221,"column":47,"offset":5051},"indent":[]}}],"position":{"start":{"line":221,"column":1,"offset":5005},"end":{"line":221,"column":47,"offset":5051},"indent":[]}},{"type":"html","lang":"jsx","meta":null,"value":"<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\">passport<span class=\"token punctuation\">.</span><span class=\"token function\">use</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">new</span> <span class=\"token class-name\">LocalStrategy</span><span class=\"token punctuation\">(</span>\n\t<span class=\"token comment\">//verify callback 함수</span>\n  <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">username<span class=\"token punctuation\">,</span> password<span class=\"token punctuation\">,</span> done</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    User<span class=\"token punctuation\">.</span><span class=\"token function\">findOne</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> username<span class=\"token operator\">:</span> username <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">err<span class=\"token punctuation\">,</span> user</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>err<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span> <span class=\"token keyword\">return</span> <span class=\"token function\">done</span><span class=\"token punctuation\">(</span>err<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token punctuation\">}</span>\n\t\t\t<span class=\"token comment\">// 아이디 없음</span>\n      <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>user<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">return</span> donnull<span class=\"token punctuation\">,</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> message<span class=\"token operator\">:</span> <span class=\"token string\">'Incorrect username.'</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token punctuation\">}</span>\n\t\t\t<span class=\"token comment\">// 비밀번호 틀림</span>\n      <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>user<span class=\"token punctuation\">.</span><span class=\"token function\">validPassword</span><span class=\"token punctuation\">(</span>password<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">return</span> <span class=\"token function\">done</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">null</span><span class=\"token punctuation\">,</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> message<span class=\"token operator\">:</span> <span class=\"token string\">'Incorrect password.'</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token punctuation\">}</span>\n\t\t\t<span class=\"token comment\">// 성공</span>\n      <span class=\"token keyword\">return</span> <span class=\"token function\">done</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">null</span><span class=\"token punctuation\">,</span> user<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>","position":{"start":{"line":223,"column":1,"offset":5053},"end":{"line":242,"column":4,"offset":5556},"indent":[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]}},{"type":"paragraph","children":[{"type":"text","value":"그리고 passport.authenticate를 다음과 같이 login request에 사용할 수 있다.","position":{"start":{"line":244,"column":1,"offset":5558},"end":{"line":244,"column":59,"offset":5616},"indent":[]}}],"position":{"start":{"line":244,"column":1,"offset":5558},"end":{"line":244,"column":59,"offset":5616},"indent":[]}},{"type":"html","lang":"jsx","meta":null,"value":"<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\">app<span class=\"token punctuation\">.</span><span class=\"token function\">post</span><span class=\"token punctuation\">(</span><span class=\"token string\">'/login'</span><span class=\"token punctuation\">,</span> passport<span class=\"token punctuation\">.</span><span class=\"token function\">authenticate</span><span class=\"token punctuation\">(</span><span class=\"token string\">'local'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">req<span class=\"token punctuation\">,</span> res</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// If this function gets called, authentication was successful.</span>\n  <span class=\"token comment\">// `req.user` contains the authenticated user.</span>\n  res<span class=\"token punctuation\">.</span><span class=\"token function\">redirect</span><span class=\"token punctuation\">(</span><span class=\"token string\">'/users/'</span> <span class=\"token operator\">+</span> req<span class=\"token punctuation\">.</span>user<span class=\"token punctuation\">.</span>username<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>","position":{"start":{"line":246,"column":1,"offset":5618},"end":{"line":252,"column":4,"offset":5867},"indent":[1,1,1,1,1,1]}},{"type":"paragraph","children":[{"type":"text","value":"passport.authentication 함수가 성공하면 req.user에 유저 정보를 넣어서 콜백 함수를 실행하지만 로그인 실패시 바로 401 authentication error 메시지를 전달한다.","position":{"start":{"line":254,"column":1,"offset":5869},"end":{"line":254,"column":114,"offset":5982},"indent":[]}}],"position":{"start":{"line":254,"column":1,"offset":5869},"end":{"line":254,"column":114,"offset":5982},"indent":[]}},{"type":"html","value":"<br>","position":{"start":{"line":256,"column":1,"offset":5984},"end":{"line":256,"column":5,"offset":5988},"indent":[]}},{"type":"paragraph","children":[{"type":"strong","children":[{"type":"text","value":"❓그럼 로그인 여부는 어디서 결정 될까?","position":{"start":{"line":258,"column":3,"offset":5992},"end":{"line":258,"column":25,"offset":6014},"indent":[]}}],"position":{"start":{"line":258,"column":1,"offset":5990},"end":{"line":258,"column":27,"offset":6016},"indent":[]}}],"position":{"start":{"line":258,"column":1,"offset":5990},"end":{"line":258,"column":27,"offset":6016},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"위의 코드에서 username, password, done을 파라미터로 받는 함수는 verify callback라고 하는데 여기서 authentication 성공과 실패 여부를 ","position":{"start":{"line":260,"column":1,"offset":6018},"end":{"line":260,"column":100,"offset":6117},"indent":[]}},{"type":"strong","children":[{"type":"text","value":"done함수","position":{"start":{"line":260,"column":102,"offset":6119},"end":{"line":260,"column":108,"offset":6125},"indent":[]}}],"position":{"start":{"line":260,"column":100,"offset":6117},"end":{"line":260,"column":110,"offset":6127},"indent":[]}},{"type":"text","value":"로 전달한다. (이때 전달된 값이 req.user에 넣어진다.)","position":{"start":{"line":260,"column":110,"offset":6127},"end":{"line":260,"column":145,"offset":6162},"indent":[]}}],"position":{"start":{"line":260,"column":1,"offset":6018},"end":{"line":260,"column":145,"offset":6162},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"성공시에는 done의 두번째 인자로 유저 정보로 실패시에는 false를 반환한다.","position":{"start":{"line":262,"column":1,"offset":6164},"end":{"line":262,"column":46,"offset":6209},"indent":[]}}],"position":{"start":{"line":262,"column":1,"offset":6164},"end":{"line":262,"column":46,"offset":6209},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"에러 발생시에는 첫번째 인자에 에러를 넣어서 반환한다. // done(err);","position":{"start":{"line":264,"column":1,"offset":6211},"end":{"line":264,"column":45,"offset":6255},"indent":[]}}],"position":{"start":{"line":264,"column":1,"offset":6211},"end":{"line":264,"column":45,"offset":6255},"indent":[]}},{"type":"html","value":"<br>","position":{"start":{"line":266,"column":1,"offset":6257},"end":{"line":266,"column":5,"offset":6261},"indent":[]}},{"type":"paragraph","children":[{"type":"strong","children":[{"type":"text","value":"❓로그인 세션을 사용하고 싶다면?","position":{"start":{"line":268,"column":3,"offset":6265},"end":{"line":268,"column":21,"offset":6283},"indent":[]}}],"position":{"start":{"line":268,"column":1,"offset":6263},"end":{"line":268,"column":23,"offset":6285},"indent":[]}}],"position":{"start":{"line":268,"column":1,"offset":6263},"end":{"line":268,"column":23,"offset":6285},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"passport 또한 session을 사용할 수 있다.","position":{"start":{"line":270,"column":1,"offset":6287},"end":{"line":270,"column":31,"offset":6317},"indent":[]}}],"position":{"start":{"line":270,"column":1,"offset":6287},"end":{"line":270,"column":31,"offset":6317},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"무조건 session 미들웨어를 이용한 후에 passport의 session을 사용한다.","position":{"start":{"line":272,"column":1,"offset":6319},"end":{"line":272,"column":50,"offset":6368},"indent":[]}}],"position":{"start":{"line":272,"column":1,"offset":6319},"end":{"line":272,"column":50,"offset":6368},"indent":[]}},{"type":"html","lang":"jsx","meta":null,"value":"<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\">app<span class=\"token punctuation\">.</span><span class=\"token function\">use</span><span class=\"token punctuation\">(</span>express<span class=\"token punctuation\">.</span><span class=\"token function\">session</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> secret<span class=\"token operator\">:</span> <span class=\"token string\">'keyboard cat'</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\napp<span class=\"token punctuation\">.</span><span class=\"token function\">use</span><span class=\"token punctuation\">(</span>passport<span class=\"token punctuation\">.</span><span class=\"token function\">initialize</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\napp<span class=\"token punctuation\">.</span><span class=\"token function\">use</span><span class=\"token punctuation\">(</span>passport<span class=\"token punctuation\">.</span><span class=\"token function\">session</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>","position":{"start":{"line":274,"column":1,"offset":6370},"end":{"line":278,"column":4,"offset":6495},"indent":[1,1,1,1]}},{"type":"paragraph","children":[{"type":"text","value":"세션을 이용하기 위해서는 serializeUser와 deserializeUser 함수를 정의해줘야 한다.","position":{"start":{"line":280,"column":1,"offset":6497},"end":{"line":280,"column":59,"offset":6555},"indent":[]}}],"position":{"start":{"line":280,"column":1,"offset":6497},"end":{"line":280,"column":59,"offset":6555},"indent":[]}},{"type":"html","lang":"jsx","meta":null,"value":"<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\">passport<span class=\"token punctuation\">.</span><span class=\"token function\">serializeUser</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">user<span class=\"token punctuation\">,</span> done</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">done</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">null</span><span class=\"token punctuation\">,</span> user<span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\npassport<span class=\"token punctuation\">.</span><span class=\"token function\">deserializeUser</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">id<span class=\"token punctuation\">,</span> done</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  User<span class=\"token punctuation\">.</span><span class=\"token function\">findById</span><span class=\"token punctuation\">(</span>id<span class=\"token punctuation\">,</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">err<span class=\"token punctuation\">,</span> user</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">done</span><span class=\"token punctuation\">(</span>err<span class=\"token punctuation\">,</span> user<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>","position":{"start":{"line":282,"column":1,"offset":6557},"end":{"line":292,"column":4,"offset":6763},"indent":[1,1,1,1,1,1,1,1,1,1]}},{"type":"html","value":"<br>","position":{"start":{"line":294,"column":1,"offset":6765},"end":{"line":294,"column":5,"offset":6769},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"📩 ","position":{"start":{"line":296,"column":1,"offset":6771},"end":{"line":296,"column":4,"offset":6774},"indent":[]}},{"type":"strong","children":[{"type":"text","value":"serializeUser","position":{"start":{"line":296,"column":6,"offset":6776},"end":{"line":296,"column":19,"offset":6789},"indent":[]}}],"position":{"start":{"line":296,"column":4,"offset":6774},"end":{"line":296,"column":21,"offset":6791},"indent":[]}}],"position":{"start":{"line":296,"column":1,"offset":6771},"end":{"line":296,"column":21,"offset":6791},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"verify callback가 유저 정보를 전달하면 실행되는 함수로, 성공한 유저의 정보를 session에 추가한다.","position":{"start":{"line":298,"column":1,"offset":6793},"end":{"line":298,"column":66,"offset":6858},"indent":[]}}],"position":{"start":{"line":298,"column":1,"offset":6793},"end":{"line":298,"column":66,"offset":6858},"indent":[]}},{"type":"html","value":"<br>","position":{"start":{"line":300,"column":1,"offset":6860},"end":{"line":300,"column":5,"offset":6864},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"📤 ","position":{"start":{"line":302,"column":1,"offset":6866},"end":{"line":302,"column":4,"offset":6869},"indent":[]}},{"type":"strong","children":[{"type":"text","value":"deserializeUser","position":{"start":{"line":302,"column":6,"offset":6871},"end":{"line":302,"column":21,"offset":6886},"indent":[]}}],"position":{"start":{"line":302,"column":4,"offset":6869},"end":{"line":302,"column":23,"offset":6888},"indent":[]}}],"position":{"start":{"line":302,"column":1,"offset":6866},"end":{"line":302,"column":23,"offset":6888},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"deserializeUser은 Cookie에 저장된 passport session 정보를 이용해서 User정보를 가져오는 함수이다.","position":{"start":{"line":304,"column":1,"offset":6890},"end":{"line":304,"column":74,"offset":6963},"indent":[]}},{"type":"break","position":{"start":{"line":304,"column":74,"offset":6963},"end":{"line":305,"column":1,"offset":6966},"indent":[1]}},{"type":"text","value":"앞에서 session과 같이 cookie에는 구체적인 유저정보가 담기지 않고 passport session id가 저장되어 있다.","position":{"start":{"line":305,"column":1,"offset":6966},"end":{"line":305,"column":73,"offset":7038},"indent":[]}}],"position":{"start":{"line":304,"column":1,"offset":6890},"end":{"line":305,"column":73,"offset":7038},"indent":[1]}},{"type":"paragraph","children":[{"type":"text","value":"🎈session 사용량을 줄이기 위해서 user의 id만 저장하고 요청이 오면 id에 해당하는 유저정보를 가져와서 쓰면 좋다.","position":{"start":{"line":307,"column":1,"offset":7040},"end":{"line":307,"column":72,"offset":7111},"indent":[]}}],"position":{"start":{"line":307,"column":1,"offset":7040},"end":{"line":307,"column":72,"offset":7111},"indent":[]}},{"type":"html","value":"<br>","position":{"start":{"line":309,"column":1,"offset":7113},"end":{"line":309,"column":5,"offset":7117},"indent":[]}},{"type":"paragraph","children":[{"type":"strong","children":[{"type":"text","value":"❓그럼 passport session은 유저에게 어떻게 저장될까?","position":{"start":{"line":311,"column":3,"offset":7121},"end":{"line":311,"column":39,"offset":7157},"indent":[]}}],"position":{"start":{"line":311,"column":1,"offset":7119},"end":{"line":311,"column":41,"offset":7159},"indent":[]}}],"position":{"start":{"line":311,"column":1,"offset":7119},"end":{"line":311,"column":41,"offset":7159},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"passport용 세션이 새로 생기는 게 아니라 express session에 하나의 property로 들어가게 된다.","position":{"start":{"line":313,"column":1,"offset":7161},"end":{"line":313,"column":67,"offset":7227},"indent":[]}},{"type":"break","position":{"start":{"line":313,"column":67,"offset":7227},"end":{"line":314,"column":1,"offset":7230},"indent":[1]}},{"type":"text","value":"cookie에 들어있는 express session이 생성한 connect.sid을 풀면 그 안에 passport session 정보가 들어있는 걸 볼 수 있다.","position":{"start":{"line":314,"column":1,"offset":7230},"end":{"line":314,"column":91,"offset":7320},"indent":[]}}],"position":{"start":{"line":313,"column":1,"offset":7161},"end":{"line":314,"column":91,"offset":7320},"indent":[1]}},{"type":"paragraph","children":[{"type":"html","title":null,"url":"./express-middleware-5.png","alt":"express-middleware-5","position":{"start":{"line":316,"column":1,"offset":7322},"end":{"line":316,"column":52,"offset":7373},"indent":[]},"value":"<span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 22.22222222222222%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAECAYAAACOXx+WAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAkklEQVQY03VPWw7DIAzjIIUNpAKlFKpJhQ+4/7U8yMSE9viwbCziOCznjForYozY9x3GGGit4ZzDtm0Ea+3b73p4Mw/NemApBed5EpRSWJYFnHPiGbPX9eef/mYpJQrUrQG/CazrSm0Ge+9p86uJbS0FpLzTsBDiCyyEgOu64Nu5Lh7Qj4Pq6xbYT5RS/hz8F/gELAtygochyNYAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"express-middleware-5\"\n        title=\"express-middleware-5\"\n        src=\"/static/e79b24f503c254d63a58cb757875853b/37523/express-middleware-5.png\"\n        srcset=\"/static/e79b24f503c254d63a58cb757875853b/e9ff0/express-middleware-5.png 180w,\n/static/e79b24f503c254d63a58cb757875853b/f21e7/express-middleware-5.png 360w,\n/static/e79b24f503c254d63a58cb757875853b/37523/express-middleware-5.png 720w,\n/static/e79b24f503c254d63a58cb757875853b/302a4/express-middleware-5.png 1080w,\n/static/e79b24f503c254d63a58cb757875853b/07a9c/express-middleware-5.png 1440w,\n/static/e79b24f503c254d63a58cb757875853b/2acc9/express-middleware-5.png 2378w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n    </span>"}],"position":{"start":{"line":316,"column":1,"offset":7322},"end":{"line":316,"column":52,"offset":7373},"indent":[]}},{"type":"html","value":"<br>","position":{"start":{"line":318,"column":1,"offset":7375},"end":{"line":318,"column":5,"offset":7379},"indent":[]}},{"type":"paragraph","children":[{"type":"strong","children":[{"type":"text","value":"❓로그인 상태에 따라 페이지 접근 제어하기!","position":{"start":{"line":320,"column":3,"offset":7383},"end":{"line":320,"column":27,"offset":7407},"indent":[]}}],"position":{"start":{"line":320,"column":1,"offset":7381},"end":{"line":320,"column":29,"offset":7409},"indent":[]}}],"position":{"start":{"line":320,"column":1,"offset":7381},"end":{"line":320,"column":29,"offset":7409},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"마이페이지와 같은 페이지에 접근할 때는 유저의 로그인 상태에 따라서 페이지를 달리 해줘야 한다.","position":{"start":{"line":322,"column":1,"offset":7411},"end":{"line":322,"column":54,"offset":7464},"indent":[]}}],"position":{"start":{"line":322,"column":1,"offset":7411},"end":{"line":322,"column":54,"offset":7464},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"이런 상황에는 passport에 의해 req에 생성된 isAuthenticated를 이용할 수 있다. 함수의 형태는 다음과 같다.","position":{"start":{"line":324,"column":1,"offset":7466},"end":{"line":324,"column":73,"offset":7538},"indent":[]}}],"position":{"start":{"line":324,"column":1,"offset":7466},"end":{"line":324,"column":73,"offset":7538},"indent":[]}},{"type":"html","lang":"jsx","meta":null,"value":"<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\">req<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">isAuthenticated</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">var</span> property <span class=\"token operator\">=</span> <span class=\"token string\">'user'</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>_passport <span class=\"token operator\">&amp;&amp;</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>_passport<span class=\"token punctuation\">.</span>instance<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    property <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>_passport<span class=\"token punctuation\">.</span>instance<span class=\"token punctuation\">.</span>_userProperty <span class=\"token operator\">||</span> <span class=\"token string\">'user'</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token keyword\">return</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">[</span>property<span class=\"token punctuation\">]</span> <span class=\"token operator\">?</span> <span class=\"token boolean\">true</span> <span class=\"token operator\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>","position":{"start":{"line":326,"column":1,"offset":7540},"end":{"line":335,"column":4,"offset":7774},"indent":[1,1,1,1,1,1,1,1,1]}},{"type":"paragraph","children":[{"type":"text","value":"위의 함수를 이용하면 다음과 같은 함수를 만들어서 페이지를 보여주기 전에 로그인 상태를 확인하여 로그인 되지 않은 req를 login page로 redirect 해줄 수 있다.","position":{"start":{"line":337,"column":1,"offset":7776},"end":{"line":337,"column":99,"offset":7874},"indent":[]}}],"position":{"start":{"line":337,"column":1,"offset":7776},"end":{"line":337,"column":99,"offset":7874},"indent":[]}},{"type":"html","lang":"jsx","meta":null,"value":"<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">function</span> <span class=\"token function\">isAuthenticated</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">req<span class=\"token punctuation\">,</span> res<span class=\"token punctuation\">,</span> next</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>req<span class=\"token punctuation\">.</span><span class=\"token function\">isAuthenticated</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">return</span> <span class=\"token function\">next</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">return</span> res<span class=\"token punctuation\">.</span><span class=\"token function\">redirect</span><span class=\"token punctuation\">(</span><span class=\"token string\">'/login'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\">// ···</span>\n\nrouter<span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token string\">'/mypage'</span><span class=\"token punctuation\">,</span> isAuthenticated<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">req<span class=\"token punctuation\">,</span> res</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> res<span class=\"token punctuation\">.</span><span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token string\">'mypage'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> user<span class=\"token operator\">:</span> req<span class=\"token punctuation\">.</span>user <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>","position":{"start":{"line":339,"column":1,"offset":7876},"end":{"line":348,"column":4,"offset":8113},"indent":[1,1,1,1,1,1,1,1,1]}},{"type":"html","value":"<br>","position":{"start":{"line":350,"column":1,"offset":8115},"end":{"line":350,"column":5,"offset":8119},"indent":[]}},{"type":"heading","depth":3,"children":[{"type":"link","url":"#bcrypt","title":null,"children":[],"data":{"hProperties":{"aria-label":"bcrypt permalink","class":"anchor before"},"hChildren":[{"type":"raw","value":"<svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg>"}]}},{"type":"link","title":null,"url":"https://www.npmjs.com/package/bcrypt","children":[{"type":"text","value":"bcrypt","position":{"start":{"line":352,"column":6,"offset":8126},"end":{"line":352,"column":12,"offset":8132},"indent":[]}}],"position":{"start":{"line":352,"column":5,"offset":8125},"end":{"line":352,"column":51,"offset":8171},"indent":[]}}],"position":{"start":{"line":352,"column":1,"offset":8121},"end":{"line":352,"column":51,"offset":8171},"indent":[]},"data":{"id":"bcrypt","htmlAttributes":{"id":"bcrypt"},"hProperties":{"id":"bcrypt","style":"position:relative;"}}},{"type":"paragraph","children":[{"type":"text","value":"bcrpyt는 비밀번호를 쉽게 암호화해주는 미들웨어이다.","position":{"start":{"line":354,"column":1,"offset":8173},"end":{"line":354,"column":32,"offset":8204},"indent":[]}}],"position":{"start":{"line":354,"column":1,"offset":8173},"end":{"line":354,"column":32,"offset":8204},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"hash를 생성할때는 bcrypt의 hash 함수를 이용하고 비밀번호를 확인할 때는 compare 함수를 이용한다.","position":{"start":{"line":356,"column":1,"offset":8206},"end":{"line":356,"column":65,"offset":8270},"indent":[]}}],"position":{"start":{"line":356,"column":1,"offset":8206},"end":{"line":356,"column":65,"offset":8270},"indent":[]}},{"type":"html","lang":"jsx","meta":null,"value":"<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">const</span> saltRounds <span class=\"token operator\">=</span> <span class=\"token number\">10</span><span class=\"token punctuation\">;</span>\nuser<span class=\"token punctuation\">.</span>passwordHash <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> bcrypt<span class=\"token punctuation\">.</span><span class=\"token function\">hash</span><span class=\"token punctuation\">(</span>password<span class=\"token punctuation\">,</span> saltRounds<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> match <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> bcrypt<span class=\"token punctuation\">.</span><span class=\"token function\">compare</span><span class=\"token punctuation\">(</span>password<span class=\"token punctuation\">,</span> user<span class=\"token punctuation\">.</span>passwordHash<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>","position":{"start":{"line":358,"column":1,"offset":8272},"end":{"line":362,"column":4,"offset":8431},"indent":[1,1,1,1]}},{"type":"html","value":"<br>","position":{"start":{"line":364,"column":1,"offset":8433},"end":{"line":364,"column":5,"offset":8437},"indent":[]}},{"type":"paragraph","children":[{"type":"strong","children":[{"type":"text","value":"❓bcrpyt가 근데 뭐지요? ","position":{"start":{"line":366,"column":3,"offset":8441},"end":{"line":366,"column":20,"offset":8458},"indent":[]}},{"type":"link","title":null,"url":"https://d2.naver.com/helloworld/318732","children":[{"type":"text","value":"비밀번호 암호화 관련 사진 출처 및 참고자료","position":{"start":{"line":366,"column":21,"offset":8459},"end":{"line":366,"column":45,"offset":8483},"indent":[]}}],"position":{"start":{"line":366,"column":20,"offset":8458},"end":{"line":366,"column":86,"offset":8524},"indent":[]}}],"position":{"start":{"line":366,"column":1,"offset":8439},"end":{"line":366,"column":88,"offset":8526},"indent":[]}}],"position":{"start":{"line":366,"column":1,"offset":8439},"end":{"line":366,"column":88,"offset":8526},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"비밀번호를 단방향으로 hashing 만으로 생길 수 있는 유추 가능성이나 빠른 속도로 인해 해커들에게 편의성을 제공할 수 있다.","position":{"start":{"line":368,"column":1,"offset":8528},"end":{"line":368,"column":72,"offset":8599},"indent":[]}}],"position":{"start":{"line":368,"column":1,"offset":8528},"end":{"line":368,"column":72,"offset":8599},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"이를 해결하기 위해 salt를 비밀번호에 더한 후에 hashing을 진행하여 다이제스트를 생성한다.","position":{"start":{"line":370,"column":1,"offset":8601},"end":{"line":370,"column":56,"offset":8656},"indent":[]}},{"type":"break","position":{"start":{"line":370,"column":56,"offset":8656},"end":{"line":371,"column":1,"offset":8659},"indent":[1]}},{"type":"text","value":"bcrypt는 이에 더해 다이제스트를 생성하는 과정을 몇번 진행할지 결정하는 ‘work factor’(여기서는 ","position":{"start":{"line":371,"column":1,"offset":8659},"end":{"line":371,"column":63,"offset":8721},"indent":[]}},{"type":"strong","children":[{"type":"text","value":"saltRounds","position":{"start":{"line":371,"column":65,"offset":8723},"end":{"line":371,"column":75,"offset":8733},"indent":[]}}],"position":{"start":{"line":371,"column":63,"offset":8721},"end":{"line":371,"column":77,"offset":8735},"indent":[]}},{"type":"text","value":"이다)를 조정하는 것 만으로 ","position":{"start":{"line":371,"column":77,"offset":8735},"end":{"line":371,"column":93,"offset":8751},"indent":[]}},{"type":"strong","children":[{"type":"text","value":"시스템 보안성을 증가","position":{"start":{"line":371,"column":95,"offset":8753},"end":{"line":371,"column":106,"offset":8764},"indent":[]}}],"position":{"start":{"line":371,"column":93,"offset":8751},"end":{"line":371,"column":108,"offset":8766},"indent":[]}},{"type":"text","value":"시킨다고 한다.","position":{"start":{"line":371,"column":108,"offset":8766},"end":{"line":371,"column":116,"offset":8774},"indent":[]}}],"position":{"start":{"line":370,"column":1,"offset":8601},"end":{"line":371,"column":116,"offset":8774},"indent":[1]}},{"type":"paragraph","children":[{"type":"html","title":null,"url":"./express-middleware-6.png","alt":"express-middleware-6","position":{"start":{"line":373,"column":1,"offset":8776},"end":{"line":373,"column":52,"offset":8827},"indent":[]},"value":"<span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 548px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 77.77777777777777%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAQCAYAAAAWGF8bAAAACXBIWXMAAAsTAAALEwEAmpwYAAACu0lEQVQ4y31U20/TcBTufwI+KA8jPCgmPGtCiCbGSzQhSEI0GHEiF4lijCRipkggGtzEiCBBHgwPxsgDDjAkXuKCEIENA7Kxa7eubmu3MWTr5fPXbh2rMk/y5bTn1/P19HznlELOZFnOe1EUVOyajELTzgtzNKMKHyw8UCz6i4ffG0IsGsemy4dwKIIIy+F/OXlCSZJUTzNuPH99B5ax2+gfasV98xX0DrbANNCEHouReCPMY7cw+sYEjo8Ur1CSRNU7vSu40VeD5rtH0dl/nFwfQ8u9alzvqUH7g2q0mchZ9xF0mc+AYQO6YnSE2lsEQQTPJQji4GIxcNEoEnwcwQCNVYcDyURCjSnnGpGuQuVmt7n/CqCZQMJsbOevqIy/WlhclCTnBv3lPCK2c/B9rMXG7FlsTJ9EZL4OoU8nwHqsuRxRX6FStgJZzpa/lfIjHFuH2/EWv6coCFYKrlcUbGYK9mEK2yQGEgsvdUEdLFnQE266XPB6PGCYIOhAHLbFPnxebILLMYft9xSCExTWRik4xymsvqTwYzRLyCybIO5FqOuTIGD951r2U6Q0GLcVnF/BNObnzHDYRsAHZsA43yHJ+/NtKtQhL4qsKiYjzDAI+PxIpVKqPPEU4KU5+II8guxWdky0UZMlHWmWMCdvoVgJQh4iI8PSHiRiDMncUcGxtEZVfFPk3Cx9q6/HZEkJZioqMFtaCntHB049msSBhj5UXHuBsksD2N/QC8PlJzAYn2Hfhcc43T2+R4U5wu+NjbAaDJirqsKHsjLYO2+i1jKF8ov9ONQ2jMrWIVQ2W3Dw6lMcbh9BuXEQdQ8nin+yMrLbBMubLiw4nUiK2VWMMT7YF2xYdyxhbWURywtfEfK6lH8OycvsDrZGmO+fEiCQMhmI6XS+rwoEQp7OCMiQtVQgKHOr7ZQmao73Dze5eEEAef4bAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"express-middleware-6\"\n        title=\"express-middleware-6\"\n        src=\"/static/f2bb47b3684c1933ec06125bd9fc6ee7/a58fe/express-middleware-6.png\"\n        srcset=\"/static/f2bb47b3684c1933ec06125bd9fc6ee7/e9ff0/express-middleware-6.png 180w,\n/static/f2bb47b3684c1933ec06125bd9fc6ee7/f21e7/express-middleware-6.png 360w,\n/static/f2bb47b3684c1933ec06125bd9fc6ee7/a58fe/express-middleware-6.png 548w\"\n        sizes=\"(max-width: 548px) 100vw, 548px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n    </span>"}],"position":{"start":{"line":373,"column":1,"offset":8776},"end":{"line":373,"column":52,"offset":8827},"indent":[]}},{"type":"html","value":"<br>","position":{"start":{"line":375,"column":1,"offset":8829},"end":{"line":375,"column":5,"offset":8833},"indent":[]}},{"type":"heading","depth":3,"children":[{"type":"link","url":"#flash","title":null,"children":[],"data":{"hProperties":{"aria-label":"flash permalink","class":"anchor before"},"hChildren":[{"type":"raw","value":"<svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg>"}]}},{"type":"link","title":null,"url":"https://www.npmjs.com/package/connect-flash","children":[{"type":"text","value":"flash","position":{"start":{"line":377,"column":6,"offset":8840},"end":{"line":377,"column":11,"offset":8845},"indent":[]}}],"position":{"start":{"line":377,"column":5,"offset":8839},"end":{"line":377,"column":57,"offset":8891},"indent":[]}}],"position":{"start":{"line":377,"column":1,"offset":8835},"end":{"line":377,"column":57,"offset":8891},"indent":[]},"data":{"id":"flash","htmlAttributes":{"id":"flash"},"hProperties":{"id":"flash","style":"position:relative;"}}},{"type":"paragraph","children":[{"type":"text","value":"flash는 세션에서 메시지를 저장할 때 사용하는 특별한 공간이다.","position":{"start":{"line":379,"column":1,"offset":8893},"end":{"line":379,"column":38,"offset":8930},"indent":[]}}],"position":{"start":{"line":379,"column":1,"offset":8893},"end":{"line":379,"column":38,"offset":8930},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"flash에 작성된 메시지는 한번 유저한테 display되면 바로 삭제된다.","position":{"start":{"line":381,"column":1,"offset":8932},"end":{"line":381,"column":43,"offset":8974},"indent":[]}}],"position":{"start":{"line":381,"column":1,"offset":8932},"end":{"line":381,"column":43,"offset":8974},"indent":[]}},{"type":"html","value":"<br>","position":{"start":{"line":383,"column":1,"offset":8976},"end":{"line":383,"column":5,"offset":8980},"indent":[]}},{"type":"paragraph","children":[{"type":"strong","children":[{"type":"text","value":"❓어디에 쓸까? 로그인 실패 메시지 전달에!","position":{"start":{"line":385,"column":3,"offset":8984},"end":{"line":385,"column":27,"offset":9008},"indent":[]}}],"position":{"start":{"line":385,"column":1,"offset":8982},"end":{"line":385,"column":29,"offset":9010},"indent":[]}}],"position":{"start":{"line":385,"column":1,"offset":8982},"end":{"line":385,"column":29,"offset":9010},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"주로 redirect와 많이 사용되는데 특히 로그인 실패 이유 메시지를 띄울 때 사용하면 매우 유용하다 ㅎㅎ","position":{"start":{"line":387,"column":1,"offset":9012},"end":{"line":387,"column":61,"offset":9072},"indent":[]}}],"position":{"start":{"line":387,"column":1,"offset":9012},"end":{"line":387,"column":61,"offset":9072},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"passport는 flash를 이용해서 message를 띄우는 걸 지원한다.","position":{"start":{"line":389,"column":1,"offset":9074},"end":{"line":389,"column":43,"offset":9116},"indent":[]}}],"position":{"start":{"line":389,"column":1,"offset":9074},"end":{"line":389,"column":43,"offset":9116},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"verify callback 함수를 보면 다음과 같이 message를 같이 보내주게 된다. 이 부분은 flash에 저장되게 된다.","position":{"start":{"line":391,"column":1,"offset":9118},"end":{"line":391,"column":73,"offset":9190},"indent":[]}}],"position":{"start":{"line":391,"column":1,"offset":9118},"end":{"line":391,"column":73,"offset":9190},"indent":[]}},{"type":"html","lang":"jsx","meta":null,"value":"<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token comment\">// ···</span>\n<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>user<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token function\">done</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">null</span><span class=\"token punctuation\">,</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> message<span class=\"token operator\">:</span> <span class=\"token string\">'Incorrect username.'</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>user<span class=\"token punctuation\">.</span><span class=\"token function\">validPassword</span><span class=\"token punctuation\">(</span>password<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token function\">done</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">null</span><span class=\"token punctuation\">,</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> message<span class=\"token operator\">:</span> <span class=\"token string\">'Incorrect password.'</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token comment\">// ···</span></code></pre></div>","position":{"start":{"line":393,"column":1,"offset":9192},"end":{"line":402,"column":4,"offset":9398},"indent":[1,1,1,1,1,1,1,1,1]}},{"type":"paragraph","children":[{"type":"text","value":"그리고 req.flash()를 이용해서 해당 값을 유저에게 전달할 수 있다!","position":{"start":{"line":404,"column":1,"offset":9400},"end":{"line":404,"column":43,"offset":9442},"indent":[]}},{"type":"strong","children":[{"type":"text","value":"(한번 보여주면 사라진다.)","position":{"start":{"line":404,"column":45,"offset":9444},"end":{"line":404,"column":60,"offset":9459},"indent":[]}}],"position":{"start":{"line":404,"column":43,"offset":9442},"end":{"line":404,"column":62,"offset":9461},"indent":[]}}],"position":{"start":{"line":404,"column":1,"offset":9400},"end":{"line":404,"column":62,"offset":9461},"indent":[]}},{"type":"html","lang":"jsx","meta":null,"value":"<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\">router<span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token string\">'/login'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">req<span class=\"token punctuation\">,</span> res</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span>\n  req<span class=\"token punctuation\">.</span><span class=\"token function\">isAuthenticated</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    <span class=\"token operator\">?</span> res<span class=\"token punctuation\">.</span><span class=\"token function\">redirect</span><span class=\"token punctuation\">(</span><span class=\"token string\">'/mypage'</span><span class=\"token punctuation\">)</span>\n    <span class=\"token operator\">:</span> res<span class=\"token punctuation\">.</span><span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token string\">'login'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> failureMsg<span class=\"token operator\">:</span> req<span class=\"token punctuation\">.</span><span class=\"token function\">flash</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>error <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>","position":{"start":{"line":406,"column":1,"offset":9463},"end":{"line":412,"column":4,"offset":9627},"indent":[1,1,1,1,1,1]}},{"type":"paragraph","children":[{"type":"html","title":null,"url":"./express-middleware-7.png","alt":"express-middleware-7","position":{"start":{"line":414,"column":1,"offset":9629},"end":{"line":414,"column":52,"offset":9680},"indent":[]},"value":"<span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 62.77777777777778%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAYAAACpUE5eAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAw0lEQVQ4y7VSSwrCMBD1ji70BIKnEd2KZ2pRXGlVFHHlopg0sZnJs7Z+QrVfdOAxw3webybp4MfW+TuhtTaFG7vI91QrdIa+WVG+WKEzFCcIxQVSK0giaDLNFbrNZynhzz0EmwDrMMRRiHaEryFDjuzPen2Fj1syc+L4zWi5HeHT69hCXS0incUiMjDE7QhjshjONLojhcFUoz9R6I0VVqeMkLkhISd+eWB4W8Jiz/B3lELqhivX+Wtl9dIb3tfKo+pRbhuLAflNJK2dAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"express-middleware-7\"\n        title=\"express-middleware-7\"\n        src=\"/static/91bfe018d292194f1d03158c01b1ae8e/37523/express-middleware-7.png\"\n        srcset=\"/static/91bfe018d292194f1d03158c01b1ae8e/e9ff0/express-middleware-7.png 180w,\n/static/91bfe018d292194f1d03158c01b1ae8e/f21e7/express-middleware-7.png 360w,\n/static/91bfe018d292194f1d03158c01b1ae8e/37523/express-middleware-7.png 720w,\n/static/91bfe018d292194f1d03158c01b1ae8e/302a4/express-middleware-7.png 1080w,\n/static/91bfe018d292194f1d03158c01b1ae8e/07a9c/express-middleware-7.png 1440w,\n/static/91bfe018d292194f1d03158c01b1ae8e/6871f/express-middleware-7.png 2688w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n    </span>"}],"position":{"start":{"line":414,"column":1,"offset":9629},"end":{"line":414,"column":52,"offset":9680},"indent":[]}},{"type":"html","value":"<br>","position":{"start":{"line":416,"column":1,"offset":9682},"end":{"line":416,"column":5,"offset":9686},"indent":[]}},{"type":"heading","depth":2,"children":[{"type":"link","url":"#-로그인-정보-저장용-파일-기반-디비-구현하기","title":null,"children":[],"data":{"hProperties":{"aria-label":" 로그인 정보 저장용 파일 기반 디비 구현하기 permalink","class":"anchor before"},"hChildren":[{"type":"raw","value":"<svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg>"}]}},{"type":"text","value":"📄 로그인 정보 저장용 파일 기반 디비 구현하기","position":{"start":{"line":418,"column":4,"offset":9691},"end":{"line":418,"column":31,"offset":9718},"indent":[]}}],"position":{"start":{"line":418,"column":1,"offset":9688},"end":{"line":418,"column":31,"offset":9718},"indent":[]},"data":{"id":"-로그인-정보-저장용-파일-기반-디비-구현하기","htmlAttributes":{"id":"-로그인-정보-저장용-파일-기반-디비-구현하기"},"hProperties":{"id":"-로그인-정보-저장용-파일-기반-디비-구현하기","style":"position:relative;"}}},{"type":"paragraph","children":[{"type":"text","value":"이전에 사용했던 sequelize와 같은 ORM과 유사하게 테이블 형태를 정의하고 create, update, getById 함수를 내장한 모델 클래스를 만들어보았다.","position":{"start":{"line":420,"column":1,"offset":9720},"end":{"line":420,"column":94,"offset":9813},"indent":[]}}],"position":{"start":{"line":420,"column":1,"offset":9720},"end":{"line":420,"column":94,"offset":9813},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"validate 함수를 통해 유저가 입력한 값이 테이블의 attributes의 타입과 일치하는지 확인하는 함수도 구현해봤다 ㅎㅎ","position":{"start":{"line":422,"column":1,"offset":9815},"end":{"line":422,"column":72,"offset":9886},"indent":[]}}],"position":{"start":{"line":422,"column":1,"offset":9815},"end":{"line":422,"column":72,"offset":9886},"indent":[]}},{"type":"html","lang":"jsx","meta":null,"value":"<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">const</span> fs <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'fs'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> path <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'path'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">Model</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">static</span> <span class=\"token function-variable function\">sync</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>fs<span class=\"token punctuation\">.</span><span class=\"token function\">existsSync</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>fileName<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">const</span> data <span class=\"token operator\">=</span> fs<span class=\"token punctuation\">.</span><span class=\"token function\">readFileSync</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>fileName<span class=\"token punctuation\">,</span> <span class=\"token string\">'utf8'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>items <span class=\"token operator\">=</span> <span class=\"token constant\">JSON</span><span class=\"token punctuation\">.</span><span class=\"token function\">parse</span><span class=\"token punctuation\">(</span>data<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">static</span> <span class=\"token function-variable function\">init</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">attributesTypes<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> tableName<span class=\"token punctuation\">,</span> sync <span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>tableName <span class=\"token operator\">=</span> tableName<span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>dirname <span class=\"token operator\">=</span> path<span class=\"token punctuation\">.</span><span class=\"token function\">join</span><span class=\"token punctuation\">(</span>__dirname<span class=\"token punctuation\">,</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">../database</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>fileName <span class=\"token operator\">=</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>dirname<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">/</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>tableName<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">.json</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>attributesTypes <span class=\"token operator\">=</span> attributesTypes<span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>items <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>sync<span class=\"token punctuation\">)</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">sync</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">static</span> <span class=\"token function-variable function\">write</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> data <span class=\"token operator\">=</span> <span class=\"token constant\">JSON</span><span class=\"token punctuation\">.</span><span class=\"token function\">stringify</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>items<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>fs<span class=\"token punctuation\">.</span><span class=\"token function\">existsSync</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>dirname<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> fs<span class=\"token punctuation\">.</span><span class=\"token function\">mkdirSync</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>dirname<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    fs<span class=\"token punctuation\">.</span><span class=\"token function\">writeFileSync</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>fileName<span class=\"token punctuation\">,</span> data<span class=\"token punctuation\">,</span> <span class=\"token string\">'utf8'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">static</span> <span class=\"token function-variable function\">validate</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">item</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> data <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>key<span class=\"token punctuation\">,</span> value<span class=\"token punctuation\">]</span> <span class=\"token keyword\">of</span> Object<span class=\"token punctuation\">.</span><span class=\"token function\">entries</span><span class=\"token punctuation\">(</span>item<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>attributesTypes<span class=\"token punctuation\">[</span>key<span class=\"token punctuation\">]</span> <span class=\"token operator\">||</span> <span class=\"token operator\">!</span>value<span class=\"token punctuation\">)</span> <span class=\"token keyword\">continue</span><span class=\"token punctuation\">;</span>\n\n      <span class=\"token keyword\">switch</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>attributesTypes<span class=\"token punctuation\">[</span>key<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">case</span> <span class=\"token string\">'date'</span><span class=\"token operator\">:</span>\n          data<span class=\"token punctuation\">[</span>key<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">Date</span><span class=\"token punctuation\">(</span>value<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n          <span class=\"token keyword\">break</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">case</span> <span class=\"token string\">'boolean'</span><span class=\"token operator\">:</span>\n          data<span class=\"token punctuation\">[</span>key<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> value <span class=\"token operator\">==</span> <span class=\"token string\">'on'</span> <span class=\"token operator\">||</span> value <span class=\"token operator\">==</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span>\n          <span class=\"token keyword\">break</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">case</span> <span class=\"token keyword\">typeof</span> value<span class=\"token operator\">:</span>\n          data<span class=\"token punctuation\">[</span>key<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> value<span class=\"token punctuation\">;</span>\n          <span class=\"token keyword\">break</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">default</span><span class=\"token operator\">:</span>\n          <span class=\"token keyword\">throw</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Error</span><span class=\"token punctuation\">(</span><span class=\"token string\">'User Input Error'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n    data<span class=\"token punctuation\">.</span>createdAt <span class=\"token operator\">=</span> Date<span class=\"token punctuation\">.</span><span class=\"token function\">now</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    data<span class=\"token punctuation\">.</span>updatedAt <span class=\"token operator\">=</span> Date<span class=\"token punctuation\">.</span><span class=\"token function\">now</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">return</span> data<span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">static</span> <span class=\"token function-variable function\">getById</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">id</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>items<span class=\"token punctuation\">.</span><span class=\"token function\">find</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">item</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> item<span class=\"token punctuation\">.</span>id <span class=\"token operator\">===</span> id<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">static</span> <span class=\"token function-variable function\">create</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">item</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> validatedItem <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">validate</span><span class=\"token punctuation\">(</span>item<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>items<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span>validatedItem<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">write</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">return</span> validatedItem<span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">static</span> <span class=\"token function-variable function\">update</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">item</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> id <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>items<span class=\"token punctuation\">.</span><span class=\"token function\">findIndex</span><span class=\"token punctuation\">(</span>item<span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    item<span class=\"token punctuation\">.</span>updatedAt <span class=\"token operator\">=</span> Date<span class=\"token punctuation\">.</span><span class=\"token function\">now</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>items<span class=\"token punctuation\">[</span>id<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> item<span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">write</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">static</span> <span class=\"token function-variable function\">delete</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">item</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> id <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>items<span class=\"token punctuation\">.</span><span class=\"token function\">findIndex</span><span class=\"token punctuation\">(</span>item<span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    item<span class=\"token punctuation\">.</span>updatedAt <span class=\"token operator\">=</span> Date<span class=\"token punctuation\">.</span><span class=\"token function\">now</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>id<span class=\"token punctuation\">)</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>items<span class=\"token punctuation\">[</span>id<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">write</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\nmodule<span class=\"token punctuation\">.</span>exports <span class=\"token operator\">=</span> Model<span class=\"token punctuation\">;</span></code></pre></div>","position":{"start":{"line":424,"column":1,"offset":9888},"end":{"line":500,"column":4,"offset":11876},"indent":[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]}},{"type":"paragraph","children":[{"type":"text","value":"그리고 User table을 위의 모델를 기반으로 만들었다:)","position":{"start":{"line":502,"column":1,"offset":11878},"end":{"line":502,"column":35,"offset":11912},"indent":[]}}],"position":{"start":{"line":502,"column":1,"offset":11878},"end":{"line":502,"column":35,"offset":11912},"indent":[]}},{"type":"html","lang":"jsx","meta":null,"value":"<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">const</span> Model <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'./model'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">Users</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">Model</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">static</span> <span class=\"token function\">init</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token keyword\">super</span><span class=\"token punctuation\">.</span><span class=\"token function\">init</span><span class=\"token punctuation\">(</span>\n      <span class=\"token punctuation\">{</span>\n        id<span class=\"token operator\">:</span> <span class=\"token string\">'string'</span><span class=\"token punctuation\">,</span>\n        pw<span class=\"token operator\">:</span> <span class=\"token string\">'string'</span><span class=\"token punctuation\">,</span>\n        email<span class=\"token operator\">:</span> <span class=\"token string\">'string'</span><span class=\"token punctuation\">,</span>\n        name<span class=\"token operator\">:</span> <span class=\"token string\">'string'</span><span class=\"token punctuation\">,</span>\n        phoneNo<span class=\"token operator\">:</span> <span class=\"token string\">'string'</span><span class=\"token punctuation\">,</span>\n        address1<span class=\"token operator\">:</span> <span class=\"token string\">'string'</span><span class=\"token punctuation\">,</span>\n        address2<span class=\"token operator\">:</span> <span class=\"token string\">'string'</span><span class=\"token punctuation\">,</span>\n        zipCode<span class=\"token operator\">:</span> <span class=\"token string\">'string'</span><span class=\"token punctuation\">,</span>\n        isAdAgreed<span class=\"token operator\">:</span> <span class=\"token string\">'boolean'</span><span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">{</span>\n        tableName<span class=\"token operator\">:</span> <span class=\"token string\">'Users'</span><span class=\"token punctuation\">,</span>\n        sync<span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\nmodule<span class=\"token punctuation\">.</span>exports <span class=\"token operator\">=</span> Users<span class=\"token punctuation\">;</span></code></pre></div>","position":{"start":{"line":504,"column":1,"offset":11914},"end":{"line":530,"column":4,"offset":12382},"indent":[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]}},{"type":"html","value":"<br>","position":{"start":{"line":532,"column":1,"offset":12384},"end":{"line":532,"column":5,"offset":12388},"indent":[]}},{"type":"heading","depth":2,"children":[{"type":"link","url":"#️-프로젝트-깃헙-레포지토리-1","title":null,"children":[],"data":{"hProperties":{"aria-label":"️ 프로젝트 깃헙 레포지토리 1 permalink","class":"anchor before"},"hChildren":[{"type":"raw","value":"<svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg>"}]}},{"type":"text","value":"📽️ 프로젝트 깃헙 레포지토리","position":{"start":{"line":534,"column":4,"offset":12393},"end":{"line":534,"column":21,"offset":12410},"indent":[]}}],"position":{"start":{"line":534,"column":1,"offset":12390},"end":{"line":534,"column":21,"offset":12410},"indent":[]},"data":{"id":"️-프로젝트-깃헙-레포지토리-1","htmlAttributes":{"id":"️-프로젝트-깃헙-레포지토리-1"},"hProperties":{"id":"️-프로젝트-깃헙-레포지토리-1","style":"position:relative;"}}},{"type":"paragraph","children":[{"type":"link","title":null,"url":"https://github.com/woowa-techcamp-2020/market-8","children":[{"type":"text","value":"[우아한테크캠프] 배민상회 회원가입/로그인 구현 프로젝트","position":{"start":{"line":536,"column":2,"offset":12413},"end":{"line":536,"column":33,"offset":12444},"indent":[]}}],"position":{"start":{"line":536,"column":1,"offset":12412},"end":{"line":536,"column":83,"offset":12494},"indent":[]}}],"position":{"start":{"line":536,"column":1,"offset":12412},"end":{"line":536,"column":83,"offset":12494},"indent":[]}},{"type":"html","value":"<br>","position":{"start":{"line":538,"column":1,"offset":12496},"end":{"line":538,"column":5,"offset":12500},"indent":[]}},{"type":"heading","depth":2,"children":[{"type":"link","url":"#-회고","title":null,"children":[],"data":{"hProperties":{"aria-label":" 회고 permalink","class":"anchor before"},"hChildren":[{"type":"raw","value":"<svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg>"}]}},{"type":"text","value":"💭 회고","position":{"start":{"line":540,"column":4,"offset":12505},"end":{"line":540,"column":9,"offset":12510},"indent":[]}}],"position":{"start":{"line":540,"column":1,"offset":12502},"end":{"line":540,"column":9,"offset":12510},"indent":[]},"data":{"id":"-회고","htmlAttributes":{"id":"-회고"},"hProperties":{"id":"-회고","style":"position:relative;"}}},{"type":"list","ordered":false,"start":null,"spread":false,"children":[{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"이번 기회를 통해서 세션이 어떻게 동작하고 특히 passport에서 세션이 어떻게 이용되는지 좀더 잘 이해할 수 있었던 것 같다.","position":{"start":{"line":542,"column":3,"offset":12514},"end":{"line":542,"column":75,"offset":12586},"indent":[]}}],"position":{"start":{"line":542,"column":3,"offset":12514},"end":{"line":542,"column":75,"offset":12586},"indent":[]}}],"position":{"start":{"line":542,"column":1,"offset":12512},"end":{"line":542,"column":75,"offset":12586},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"다음에는 morgan을 파일로 로깅하는데 까지 사용해봐야겠다.","position":{"start":{"line":543,"column":3,"offset":12589},"end":{"line":543,"column":37,"offset":12623},"indent":[]}}],"position":{"start":{"line":543,"column":3,"offset":12589},"end":{"line":543,"column":37,"offset":12623},"indent":[]}}],"position":{"start":{"line":543,"column":1,"offset":12587},"end":{"line":543,"column":37,"offset":12623},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"모르고 사용해서 사실 불안한 부분들이 많았는데 이번 기회에 그런 불안함이 많이 해소된 것 같아 보람차다.","position":{"start":{"line":544,"column":3,"offset":12626},"end":{"line":544,"column":61,"offset":12684},"indent":[]}}],"position":{"start":{"line":544,"column":3,"offset":12626},"end":{"line":544,"column":61,"offset":12684},"indent":[]}}],"position":{"start":{"line":544,"column":1,"offset":12624},"end":{"line":544,"column":61,"offset":12684},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"strong","children":[{"type":"text","value":"❓무엇보다 프론트엔드는 너무 부족하니 다음 기회에는 프론트엔드 공부에도 더 많이 신경써봐야겠다!","position":{"start":{"line":545,"column":5,"offset":12689},"end":{"line":545,"column":58,"offset":12742},"indent":[]}}],"position":{"start":{"line":545,"column":3,"offset":12687},"end":{"line":545,"column":60,"offset":12744},"indent":[]}}],"position":{"start":{"line":545,"column":3,"offset":12687},"end":{"line":545,"column":60,"offset":12744},"indent":[]}}],"position":{"start":{"line":545,"column":1,"offset":12685},"end":{"line":545,"column":60,"offset":12744},"indent":[]}}],"position":{"start":{"line":542,"column":1,"offset":12512},"end":{"line":545,"column":60,"offset":12744},"indent":[1,1,1]}},{"type":"blockquote","children":[{"type":"paragraph","children":[{"type":"text","value":"잘못 정리된 점이나 피드백 있으면 말씀해주세요!","position":{"start":{"line":547,"column":3,"offset":12748},"end":{"line":547,"column":29,"offset":12774},"indent":[]}}],"position":{"start":{"line":547,"column":3,"offset":12748},"end":{"line":547,"column":29,"offset":12774},"indent":[]}}],"position":{"start":{"line":547,"column":1,"offset":12746},"end":{"line":547,"column":29,"offset":12774},"indent":[]}},{"type":"html","value":"<div class=\"table-of-contents\">"},{"type":"list","ordered":false,"spread":true,"children":[{"type":"listItem","spread":false,"children":[{"type":"paragraph","children":[{"type":"link","title":null,"url":"#-목적","children":[{"type":"text","value":"🧩 목적"}]}]}]},{"type":"listItem","spread":false,"children":[{"type":"paragraph","children":[{"type":"link","title":null,"url":"#️-프로젝트-깃헙-레포지토리","children":[{"type":"text","value":"📽️ 프로젝트 깃헙 레포지토리"}]}]}]},{"type":"listItem","spread":true,"children":[{"type":"paragraph","children":[{"type":"link","title":null,"url":"#-express-주요-미들웨어","children":[{"type":"text","value":"🏭 Express 주요 미들웨어"}]}]},{"type":"list","ordered":false,"spread":false,"children":[{"type":"listItem","spread":false,"children":[{"type":"paragraph","children":[{"type":"link","title":null,"url":"#pug","children":[{"type":"text","value":"pug"}]}]}]},{"type":"listItem","spread":false,"children":[{"type":"paragraph","children":[{"type":"link","title":null,"url":"#morgan","children":[{"type":"text","value":"morgan"}]}]}]},{"type":"listItem","spread":false,"children":[{"type":"paragraph","children":[{"type":"link","title":null,"url":"#express-session","children":[{"type":"text","value":"express-session"}]}]}]}]}]},{"type":"listItem","spread":true,"children":[{"type":"paragraph","children":[{"type":"link","title":null,"url":"#-본격-express로-로그인-구현하기","children":[{"type":"text","value":"🤝 본격 express로 로그인 구현하기"}]}]},{"type":"list","ordered":false,"spread":false,"children":[{"type":"listItem","spread":false,"children":[{"type":"paragraph","children":[{"type":"link","title":null,"url":"#passport","children":[{"type":"text","value":"passport"}]}]}]},{"type":"listItem","spread":false,"children":[{"type":"paragraph","children":[{"type":"link","title":null,"url":"#bcrypt","children":[{"type":"text","value":"bcrypt"}]}]}]},{"type":"listItem","spread":false,"children":[{"type":"paragraph","children":[{"type":"link","title":null,"url":"#flash","children":[{"type":"text","value":"flash"}]}]}]}]}]},{"type":"listItem","spread":false,"children":[{"type":"paragraph","children":[{"type":"link","title":null,"url":"#-로그인-정보-저장용-파일-기반-디비-구현하기","children":[{"type":"text","value":"📄 로그인 정보 저장용 파일 기반 디비 구현하기"}]}]}]},{"type":"listItem","spread":false,"children":[{"type":"paragraph","children":[{"type":"link","title":null,"url":"#️-프로젝트-깃헙-레포지토리-1","children":[{"type":"text","value":"📽️ 프로젝트 깃헙 레포지토리"}]}]}]},{"type":"listItem","spread":false,"children":[{"type":"paragraph","children":[{"type":"link","title":null,"url":"#-회고","children":[{"type":"text","value":"💭 회고"}]}]}]}]},{"type":"html","value":"</div>"}],"position":{"start":{"line":1,"column":1,"offset":0},"end":{"line":552,"column":1,"offset":12788}}}}